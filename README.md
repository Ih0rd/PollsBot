# Telegram Polls Bot 2.0 - –ë–æ—Ç –¥–ª—è –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è

## üìã –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

**Telegram Polls Bot 2.0** - —ç—Ç–æ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –±–æ—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è–º–∏ –≤ Telegram. –ë–æ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–π, —Å–∏—Å—Ç–µ–º—É —à–∞–±–ª–æ–Ω–æ–≤, –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ.

### üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–°–æ–∑–¥–∞–Ω–∏–µ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–π**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–π (–±–∏–Ω–∞—Ä–Ω–æ–µ, –∑–∞/–ø—Ä–æ—Ç–∏–≤/–≤–æ–∑–¥–µ—Ä–∂–∞–ª—Å—è, –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä, —Ä–µ–π—Ç–∏–Ω–≥)
- **–°–∏—Å—Ç–µ–º–∞ —à–∞–±–ª–æ–Ω–æ–≤**: –°–æ–∑–¥–∞–Ω–∏–µ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–π —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏
- **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏, –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞, –ª–æ–≥–∞–º–∏
- **–ü—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –ª–æ–≥–æ–≤ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- **Inline —Ä–µ–∂–∏–º**: –°–æ–∑–¥–∞–Ω–∏–µ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–π —á–µ—Ä–µ–∑ inline –∑–∞–ø—Ä–æ—Å—ã
- **–°–∏—Å—Ç–µ–º–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞**: –ì—Ä–∞–Ω—É–ª—è—Ä–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∞–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞**: –£–¥–∞–ª–µ–Ω–∏–µ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö –∏ –ª–æ–≥–æ–≤

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.8+
- Telegram Bot Token (–ø–æ–ª—É—á–∏—Ç—å —É [@BotFather](https://t.me/BotFather))

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. **–ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è**
```bash
git clone <repository-url>
cd polls-bot
```

2. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**
```bash
pip install python-telegram-bot==20.7
```

3. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**
```bash
# –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª config.json –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ /opt/root/PollsBot/
mkdir -p /opt/root/PollsBot
```

–°–æ–¥–µ—Ä–∂–∏–º–æ–µ `config.json`:
```json
{
    "bot_token": "YOUR_BOT_TOKEN_HERE",
    "admin_user_ids": [123456789],
    "polling_interval": 2,
    "max_poll_question": 300,
    "max_poll_option": 100,
    "rate_limit_window": 3600,
    "session_timeout": 7200
}
```

4. **–ó–∞–ø—É—Å–∫ –±–æ—Ç–∞**
```bash
python polls_bot.py
```

## üìñ –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

#### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

1. **PollsBot** - –≥–ª–∞–≤–Ω—ã–π –∫–ª–∞—Å—Å –±–æ—Ç–∞
2. **Database** - —Ä–∞–±–æ—Ç–∞ —Å SQLite –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
3. **LogManager** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–æ–π –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
4. **RateLimiter** - –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤
5. **Menus** - —Å–∏—Å—Ç–µ–º–∞ –º–µ–Ω—é –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```sql
-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
CREATE TABLE users (
    user_id INTEGER PRIMARY KEY,
    username TEXT,
    permissions TEXT DEFAULT 'use',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è
CREATE TABLE polls (
    poll_id TEXT PRIMARY KEY,
    question TEXT NOT NULL,
    options TEXT NOT NULL,
    chat_id INTEGER NOT NULL,
    creator_id INTEGER NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    closed_at TIMESTAMP,
    threshold INTEGER DEFAULT 50,
    non_anonymous BOOLEAN DEFAULT FALSE,
    voting_type TEXT DEFAULT 'multiple_choice',
    max_participants INTEGER DEFAULT 0,
    decision_number INTEGER
);

-- –ì–æ–ª–æ—Å–∞
CREATE TABLE votes (
    vote_id INTEGER PRIMARY KEY AUTOINCREMENT,
    poll_id TEXT NOT NULL,
    user_id INTEGER NOT NULL,
    option_index INTEGER NOT NULL,
    voted_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (poll_id) REFERENCES polls(poll_id)
);

-- –®–∞–±–ª–æ–Ω—ã
CREATE TABLE templates (
    template_id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT NOT NULL,
    question TEXT NOT NULL,
    options TEXT NOT NULL,
    variables TEXT,
    creator_id INTEGER NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    usage_count INTEGER DEFAULT 0
);

-- –°–µ—Å—Å–∏–∏ —à–∞–±–ª–æ–Ω–æ–≤
CREATE TABLE template_sessions (
    session_id TEXT PRIMARY KEY,
    user_id INTEGER NOT NULL,
    template_name TEXT NOT NULL,
    variables TEXT NOT NULL,
    values TEXT,
    chat_id INTEGER NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- –°–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
CREATE TABLE user_states (
    user_id INTEGER PRIMARY KEY,
    state TEXT NOT NULL,
    data TEXT,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

### üéÆ –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

#### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∞–≤–∞ |
|---------|----------|-------|
| `/start` | –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞, –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é | –í—Å–µ |
| `/create` | –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è | create |
| `/templates` | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞–º–∏ | create |
| `/status` | –°—Ç–∞—Ç—É—Å –±–æ—Ç–∞ | –í—Å–µ |
| `/help` | –°–ø—Ä–∞–≤–∫–∞ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º | –í—Å–µ |

#### –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∞–≤–∞ |
|---------|----------|-------|
| `/admin` | –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ | admin |
| `/users` | –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π | admin |
| `/grant` | –í—ã–¥–∞—á–∞ –ø—Ä–∞–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é | admin |
| `/revoke` | –û—Ç–∑—ã–≤ –ø—Ä–∞–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | admin |
| `/delete_user` | –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | admin |

### üó≥Ô∏è –¢–∏–ø—ã –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–π

#### 1. –ë–∏–Ω–∞—Ä–Ω–æ–µ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ (Binary)
- –ü—Ä–æ—Å—Ç–æ–µ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ —Å –¥–≤—É–º—è –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏: "–ó–∞" –∏ "–ü—Ä–æ—Ç–∏–≤"
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ "–î–∞", "–ù–µ—Ç", "Yes", "No", "–ó–∞", "–ü—Ä–æ—Ç–∏–≤"

#### 2. –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ –∑–∞/–ø—Ä–æ—Ç–∏–≤/–≤–æ–∑–¥–µ—Ä–∂–∞–ª—Å—è (Approval)
- –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ —Å —Ç—Ä–µ–º—è –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏: "–ó–∞", "–ü—Ä–æ—Ç–∏–≤", "–í–æ–∑–¥–µ—Ä–∂–∞–ª—Å—è"
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–µ–π—Ç—Ä–∞–ª—å–Ω—É—é –ø–æ–∑–∏—Ü–∏—é
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤

#### 3. –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä (Choice)
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤—ã–±—Ä–∞—Ç—å –æ–¥–∏–Ω –≤–∞—Ä–∏–∞–Ω—Ç
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–π —Å –±–æ–ª–µ–µ —á–µ–º 3 –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏

#### 4. –†–µ–π—Ç–∏–Ω–≥ (Rating)
- –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ —Å —á–∏—Å–ª–æ–≤—ã–º–∏ –æ—Ü–µ–Ω–∫–∞–º–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ —á–∏—Å–ª–æ–≤—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ (1-5, 1-10)

### üìù –°–∏—Å—Ç–µ–º–∞ —à–∞–±–ª–æ–Ω–æ–≤

#### –°–æ–∑–¥–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞

1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É `/templates`
2. –í—ã–±–µ—Ä–∏—Ç–µ "–°–æ–∑–¥–∞—Ç—å —à–∞–±–ª–æ–Ω"
3. –í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞
4. –°–æ–∑–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `{variable_name}`
5. –î–æ–±–∞–≤—å—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤

#### –ü—Ä–∏–º–µ—Ä —à–∞–±–ª–æ–Ω–∞

**–ù–∞–∑–≤–∞–Ω–∏–µ**: –í—ã–±–æ—Ä –º–µ—Å—Ç–∞ –≤—Å—Ç—Ä–µ—á–∏
**–í–æ–ø—Ä–æ—Å**: –ì–¥–µ –ø—Ä–æ–≤–µ–¥–µ–º –≤—Å—Ç—Ä–µ—á—É {event_name}?
**–í–∞—Ä–∏–∞–Ω—Ç—ã**:
- –ö–∞—Ñ–µ {cafe_name}
- –ü–∞—Ä–∫ {park_name}
- –û—Ñ–∏—Å

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞

1. –í—ã–±–µ—Ä–∏—Ç–µ —à–∞–±–ª–æ–Ω –∏–∑ —Å–ø–∏—Å–∫–∞
2. –í–≤–µ–¥–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è
4. –°–æ–∑–¥–∞–π—Ç–µ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ

### üîê –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞

#### –£—Ä–æ–≤–Ω–∏ –ø—Ä–∞–≤

| –ü—Ä–∞–≤–æ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|
| `use` | –ë–∞–∑–æ–≤—ã–µ –ø—Ä–∞–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| `create` | –°–æ–∑–¥–∞–Ω–∏–µ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–π –∏ —à–∞–±–ª–æ–Ω–æ–≤ |
| `admin` | –ü–æ–ª–Ω—ã–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –ø—Ä–∞–≤–∞ |

#### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∞–º–∏

```bash
# –í—ã–¥–∞—á–∞ –ø—Ä–∞–≤
/grant @username create

# –û—Ç–∑—ã–≤ –ø—Ä–∞–≤
/revoke @username create

# –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
/delete_user @username
```

### üìä –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å

#### –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

1. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏**
   - –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
   - –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

2. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - –ê–∫—Ç–∏–≤–Ω—ã–µ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤

3. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–æ–≥–∞–º–∏**
   - –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –ø–æ —É—Ä–æ–≤–Ω—è–º
   - –û—á–∏—Å—Ç–∫–∞ –ª–æ–≥–æ–≤
   - –†–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É—Ä–æ–≤–Ω–µ–π –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

### üìã –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

#### –£—Ä–æ–≤–Ω–∏ –ª–æ–≥–æ–≤

- **DEBUG** - –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- **INFO** - –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- **WARNING** - –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
- **ERROR** - –û—à–∏–±–∫–∏
- **CRITICAL** - –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏

#### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–æ–≥–∞–º–∏

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ª–æ–≥–æ–≤
/admin -> –õ–æ–≥–∏ -> –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

# –û—á–∏—Å—Ç–∫–∞ –≤—Å–µ—Ö –ª–æ–≥–æ–≤
/admin -> –õ–æ–≥–∏ -> –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è
/admin -> –õ–æ–≥–∏ -> –ü—Ä–æ—Å–º–æ—Ç—Ä -> –í—ã–±—Ä–∞—Ç—å —É—Ä–æ–≤–µ–Ω—å
```

### üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

#### –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

```json
{
    "bot_token": "YOUR_BOT_TOKEN",
    "admin_user_ids": [123456789],
    "polling_interval": 2,
    "max_poll_question": 300,
    "max_poll_option": 100,
    "rate_limit_window": 3600,
    "session_timeout": 7200,
    "max_retries": 3,
    "retry_delay": 5
}
```

#### –û–ø–∏—Å–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|----------|----------|--------------|
| `bot_token` | –¢–æ–∫–µ–Ω –±–æ—Ç–∞ –æ—Ç BotFather | - |
| `admin_user_ids` | ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ | [] |
| `polling_interval` | –ò–Ω—Ç–µ—Ä–≤–∞–ª –æ–ø—Ä–æ—Å–∞ Telegram API | 2 |
| `max_poll_question` | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –≤–æ–ø—Ä–æ—Å–∞ | 300 |
| `max_poll_option` | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ | 100 |
| `rate_limit_window` | –û–∫–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ (—Å–µ–∫) | 3600 |
| `session_timeout` | –¢–∞–π–º–∞—É—Ç —Å–µ—Å—Å–∏–∏ (—Å–µ–∫) | 7200 |

### üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

#### Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```dockerfile
FROM python:3.9-slim

WORKDIR /app

COPY requirements.txt .
RUN pip install -r requirements.txt

COPY polls_bot.py .
COPY config.json /opt/root/PollsBot/

CMD ["python", "polls_bot.py"]
```

#### Systemd —Å–µ—Ä–≤–∏—Å

```ini
[Unit]
Description=Telegram Polls Bot
After=network.target

[Service]
Type=simple
User=botuser
WorkingDirectory=/opt/root/PollsBot
ExecStart=/usr/bin/python3 /opt/root/PollsBot/polls_bot.py
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
```

### üêõ –û—Ç–ª–∞–¥–∫–∞ –∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

#### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **–ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω –≤ config.json
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–æ—Ç –Ω–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫

2. **–û—à–∏–±–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª—É polls.db
   - –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ SQL –∑–∞–ø—Ä–æ—Å–æ–≤

3. **–ü—Ä–æ–±–ª–µ–º—ã —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ –∑–∞–ø–∏—Å—å –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ª–æ–≥–æ–≤
   - –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–º –º–µ—Å—Ç–µ –Ω–∞ –¥–∏—Å–∫–µ

#### –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
tail -f /opt/root/PollsBot/logs/info.log

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –±–æ—Ç–∞
python polls_bot.py --status

# –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö
python polls_bot.py --cleanup
```

### üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

#### –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è

- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–π
- –í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ –±–æ—Ç–∞
- –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–æ–≤ –ª–æ–≥–æ–≤
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏

#### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

- **Prometheus + Grafana** - –¥–ª—è –º–µ—Ç—Ä–∏–∫
- **ELK Stack** - –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ª–æ–≥–æ–≤
- **Uptime Robot** - –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏

### üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏—è

#### –ü—Ä–æ—Ü–µ—Å—Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –±–æ—Ç–∞
2. –°–æ–∑–¥–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
3. –û–±–Ω–æ–≤–∏—Ç–µ –∫–æ–¥
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
5. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞

```bash
# –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
cp polls.db polls.db.backup

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ
git pull origin main

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
systemctl restart polls-bot
```